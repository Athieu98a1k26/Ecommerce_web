<header class="ecommerce-header">
  <div class="header-container container-custom-xxl">
    <div class="header-content">
      <!-- Logo -->
      <div class="header-logo">
        <a href="#" class="logo-link">
          <img src="assets/img/logo.png" alt="E-Shop Logo" class="logo-img" />
        </a>
      </div>
      <!-- Language Selector -->
      <div class="lang-dropdown">
        <button class="lang-selected">
          <img src="https://flagcdn.com/w20/vn.png" alt="VN" />
          <span>Tiếng việt</span>
          <svg viewBox="0 0 24 24">
            <path d="M7 10l5 5 5-5z"></path>
          </svg>
        </button>
        <ul class="lang-menu">
          <li>
            <img src="https://flagcdn.com/w20/vn.png" alt="VN" />
            <span>Tiếng Việt</span>
          </li>
          <li>
            <img src="https://flagcdn.com/w20/us.png" alt="EN" />
            <span>English</span>
          </li>
          <li>
            <img src="https://flagcdn.com/w20/jp.png" alt="JP" />
            <span>日本語</span>
          </li>
        </ul>
      </div>

      <!-- Search Bar -->
      <div class="header-search">
        <form class="search-form" (ngSubmit)="onSearch()">
          <input
            type="text"
            class="search-input"
            placeholder="Tìm kiếm sản phẩm"
            [(ngModel)]="searchQuery"
            name="searchQuery"
          />
          <button type="submit" class="search-button">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>

      <!-- Right Actions -->
      <div class="header-actions">
        <div class="notification-icon-wrapper" (clickOutside)="closeDropdown()">
          <a
            href="javascript:void(0)"
            class="notification-link"
            (click)="toggleNotifications($event)"
          >
            <i class="fas fa-bell"></i>
            <span class="cart-badge" *ngIf="notificationCount > 0">
              {{ notificationCount }}
            </span>
          </a>
          <!-- Dropdown thông báo -->
          <div class="notification-dropdown" *ngIf="showNotifications">
            <div class="dropdown-header">
              Thông báo
            </div>
            <div
              class="notification-item"
              *ngFor="let item of notifications"
            >
              <div class="title">{{ item.title }}</div>
              <div class="time">{{ item.time }}</div>
            </div>
            <div class="empty" *ngIf="notifications.length === 0">
              Không có thông báo
            </div>
          </div>
        </div>
        <!-- Cart -->
        <div class="cart-icon-wrapper">
          <a routerLink="/ecommerce/cart" class="cart-link">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-badge" *ngIf="cartItemCount > 0">{{
              cartItemCount
            }}</span>
          </a>
        </div>
        <!-- User Avatar / Login -->
        <div class="user-wrap">
          <div class="user-menu" *ngIf="isLoggedIn">
            <div class="user-info" (click)="toggleUserDropdown()">
              <img [src]="userAvatar" alt="User" class="user-avatar" onerror="this.src='assets/img/user.png'">
              <span class="username">{{ userName }}</span>
              <i class="fas fa-chevron-down" [class.rotated]="showUserDropdown"></i>
            </div>
            <div class="user-dropdown" [class.show]="showUserDropdown">
              <a routerLink="/ecommerce/user" class="dropdown-item">
                <i class="fas fa-user"></i>
                Tài khoản của tôi
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item" (click)="onLogout(); $event.preventDefault()">
                <i class="fas fa-sign-out-alt"></i>
                Đăng xuất
              </a>
            </div>
          </div>
          <a href="/ecommerce/auth" class="login-button" *ngIf="!isLoggedIn">
            Đăng nhập / Đăng ký
          </a>
        </div>
      </div>
    </div>
  </div>
</header>